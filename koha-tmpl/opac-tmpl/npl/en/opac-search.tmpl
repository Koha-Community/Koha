<!-- TMPL_INCLUDE NAME="doc-head-open.inc" --><!-- TMPL_VAR NAME="LibraryName" --> Catalog -- Advanced Search
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<!--TMPL_INCLUDE NAME="masthead_adv.inc" -->
<!--TMPL_INCLUDE NAME="navigation.inc" -->

<!-- CONTENT -->
<div id="main">
<h1>Search the Catalog</h1>

<form name="f" method="post" action="/cgi-bin/koha/opac-search.pl">
<div class="form">
<table>
<tr><th><label for="keyword">Keyword</label></th><td><input type="hidden" name="op" value="do_search" />
			<input type="hidden" name="nbstatements" value="<!-- TMPL_VAR NAME="nbstatements" -->" />
		<input type="hidden" name="marclist" value="" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="keyword" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="title">Title</label></th><td><input type="hidden" name="marclist" value="biblio.title" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="title" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="author">Author</label></th><td><input type="hidden" name="marclist" value="biblio.author" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="author" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="subject">Subject</label></th><td>			
			<input type="hidden" name="marclist" value="bibliosubject.subject" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />  
			<input type="text" id="subject" name="value" onchange="sql_update()" size="35" /></td></tr>
<tr><th><label for="seriestitle">Series title</label></th><td>			
			<input type="hidden" name="marclist" value="biblio.seriestitle" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="seriestitle" name="value" onchange="sql_update()" size="35"/></td></tr>

<tr><th><label for="itemtype">Format</label></th><td><input type="hidden" name="marclist" value="biblioitems.itemtype" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<!-- TMPL_VAR name="CGIitemtype" --></td></tr>
<tr><th><label for="branch">Location</label></th><td><input type="hidden" name="marclist" value="items.holdingbranch" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />  
				<!-- TMPL_VAR name="CGIbranch" --></td></tr>
</table>			
<table>
<caption>Other options:</caption>
<tr><th><label for="barcode">Barcode</label></th><td>
				<input type="hidden" name="marclist" value="items.barcode" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />
				<input type="text" id="barcode" name="value" onchange="sql_update()" size="14" maxlength="14" /></td></tr>
<tr><th><label for="dewey">Call Number</label></th><td><input type="hidden" name="marclist" value="biblioitems.dewey" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="start" />
			<input type="text" id="dewey" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="isbn">ISBN</label></th><td><input type="hidden" name="marclist" value="biblioitems.isbn" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="start" />
			<input type="text" id="isbn" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="publisher">Publisher</label></th><td><input type="hidden" name="marclist" value="biblioitems.publishercode" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" id="publisher" name="value" onchange="sql_update()" /></td></tr>
<tr><th><label for="pubbetween">Published between</label></th><td><input type="hidden" name="marclist" value="biblioitems.publicationyear" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value=">=" />
			<input type="text" id="pubbetween" name="value" size="6" maxlength="4" onchange="sql_update()" /></td></tr>
<tr><th><label for="puband">...and</label></th><td><input type="hidden" name="marclist" value="biblioitems.publicationyear" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="<=" />
			<input type="text" id="puband" name="value" size="6" maxlength="4" onchange="sql_update()" /></td></tr>
</table>
		<p>Results per page :
			<select name="resultsperpage" size="1">
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
			</select>
		Ordered by
			<select name="orderby" size="1">
				<option value="biblio.title">Title</option>
				<option value="biblio.author">Author</option>
				<option value="biblioitems.dewey">Dewey</option>
				<option value="biblioitems.publicationyear">Publication Year</option>
				<option value="biblioitems.publishercode">Publisher</option>
			</select>
		</p>
		<p>
			<input type="submit" value="Search" class="submit" />
		</p>
	</div>
</form>

<script type="text/javascript">
function sql_update() {
document.f.sql.value="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
			document.f.sql.value = document.f.sql.value+
										document.f.and_or[i].value + ' (' +
										document.f.excluding[i].value + ' ' +
										document.f.marclist[i].value + ' ' +
										document.f.operator[i].value + ' ' +
										'\''+document.f.value[i].value + '\') ';
		}
	}
}

function AddStatement() {

	document.forms[0].op.value="AddStatement";
	document.f.submit();
}

function PopupSuggestion() {
    var strQuery="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
		    strQuery += " "+document.f.value[i].value;
		}
	}
	newin=window.open("suggest.pl?Q="+strQuery,"Suggestions",'width=500,height=400,toolbar=false,scrollbars=yes');
}

</script>


</div>
</body>
</html>
