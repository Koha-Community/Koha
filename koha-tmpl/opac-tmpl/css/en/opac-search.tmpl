    <!-- TMPL_INCLUDE NAME="opac-top.inc" -->
<div id="mainbloc">

<h1 class="catalogue">Catalogue search</h1>

<form name="f" method="post" action="<!-- TMPL_VAR name="SCRIPT_NAME" -->">
	
	<div id="bloc20">
		<h2 class="catalogue">Search on</h2>
		<p>
			<input type="hidden" name="op" value="do_search" />
			<input type="hidden" name="nbstatements" value="<!-- TMPL_VAR NAME="nbstatements" -->" />
			<label class="label20">Any word</label>
			<input type="hidden" name="marclist" value="" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" name="value" onchange="sql_update()" size="35" />
		</p>
		<p>
			<label class="label20">Title</label>
			<input type="hidden" name="marclist" value="biblio.title" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" name="value" onchange="sql_update()" size="35" />
		</p>
		<p>
			<label class="label20">Author</label> <input type="hidden" name="marclist" value="biblio.author" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" name="value" onchange="sql_update()" size="35" />
		</p>
		<p>
			<label class="label20">Subject</label>
			<input type="hidden" name="marclist" value="bibliosubject.subject" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />  
			<input type="text" name="value" onchange="sql_update()" size="35" />
		</p>
		<p>
			<label class="label20">Item Type</label>
			<input type="hidden" name="marclist" value="biblioitems.itemtype" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<!-- TMPL_VAR name="CGIitemtype" -->
		</p>
		<p>
				<label class="label20">Branch</label>
				<input type="hidden" name="marclist" value="items.holdingbranch" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="=" />  
				<!-- TMPL_VAR name="CGIbranch" -->
		</p>
		<p>
			<input type="submit" value="Start search" class="button catalogue" />
		</p>
	</div>
	<div id="bloc20">
		<h2>Other options</h2>
		<p>
				<label class="label20">Item barcode</label>
				<input type="hidden" name="marclist" value="items.barcode" />
				<input type="hidden" name="and_or" value="and" />
				<input type="hidden" name="excluding" value="" />
				<input type="hidden" name="operator" value="contains" />
				<input type="text" name="value" onchange="sql_update()" /> 
		</p>
		<p>
			<label class="label20">Call Number</label>
			<input type="hidden" name="marclist" value="items.itemcallnumber" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" name="value" onchange="sql_update()" />
		</p>
		<p>
			<label class="label20">ISBN</label>
			<input type="hidden" name="marclist" value="biblioitems.isbn" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="=" />
			<input type="text" name="value" onchange="sql_update()" />
		</p>
		<p>
			<label class="label20">Publisher</label>
			<input type="hidden" name="marclist" value="biblioitems.publishercode" />
			<input type="hidden" name="and_or" value="and" />
			<input type="hidden" name="excluding" value="" />
			<input type="hidden" name="operator" value="contains" />
			<input type="text" name="value" onchange="sql_update()" />
		</p>
		<p>Results per page :
			<select name="resultsperpage" size="1">
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
			</select>
		</p>
		<p>Ordered by
			<select name="orderby" size="1">
				<option value="biblio.title">Title</option>
				<option value="biblio.author">Author</option>
				<option value="biblioitems.dewey">Dewey</option>
				<option value="biblioitems.publicationyear">Publication Year</option>
				<option value="biblioitems.publishercode">Publisher</option>
				<option value="biblio.timestamp desc">Acquisition date</option>
			</select>
		</p>
		<p>&nbsp;</p>
		<p>&nbsp;</p>
	</div>
	<div id="bloc60">
		<h2>Hints</h2>
		<h3>Title</h3>
		<p>You can enter a complete or a part of a title. The search will also be done in subtitles & other title-related fields</p>
		<h3>Author</h3>
		<p>You can enter a name or a surname. The search will also be done is additional authors & other author-related fields (translator, illustrator...)</p>
		<p>Remember that a title can concern a "physical" author (Victor Hugo) or a company, group, collective author (CNRS, Library of Congress)</p>
		<h3>Branches</h3>
		<p>Select a branch if you want to limit your search to items in a specific branch. By default the search is done on every branches of the library</p>
		<h3>Partial search</h3>
		<p>A search is done on every words you enter. Empty words are ignored. If you enter, for example "the two towers" in the title, the result list will contain all the books containing two AND tower in the title. The "the" will be discarded.</p>
		<p>If you want to enter a partial word, add a * or a % at the end of the word. For example "two tower*" will retrieve "the two towers", "two white towers", "a tower and two cities"</p>
	</div>
</form>

<script type="text/javascript">
function sql_update() {
document.f.sql.value="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
			document.f.sql.value = document.f.sql.value+
										document.f.and_or[i].value + ' (' +
										document.f.excluding[i].value + ' ' +
										document.f.marclist[i].value + ' ' +
										document.f.operator[i].value + ' ' +
										'\''+document.f.value[i].value + '\') ';
		}
	}
}

function AddStatement() {

	document.forms[0].op.value="AddStatement";
	document.f.submit();
}

function PopupSuggestion() {
    var strQuery="";
	for (i=0 ; i<document.f.marclist.length ; i++) {
		if (document.f.value[i].value.length>0) {
		    strQuery += " "+document.f.value[i].value;
		}
	}
	newin=window.open("suggest.pl?Q="+strQuery,"Suggestions",'width=500,height=400,toolbar=false,scrollbars=yes');
}

</script>
</div>
<!-- TMPL_INCLUDE NAME="opac-bottom.inc" -->
