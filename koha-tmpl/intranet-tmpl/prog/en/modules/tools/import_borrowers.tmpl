<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; Cataloging &rsaquo; Import Patrons <!-- TMPL_IF NAME="uploadborrowers" -->&rsaquo; Results<!-- /TMPL_IF --></title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
</head>
<body>
<!-- TMPL_INCLUDE NAME="header.inc" -->
<!-- TMPL_INCLUDE NAME="patron-search.inc"-->

<div id="breadcrumbs"><a href="/cgi-bin/koha/mainpage.pl">Home</a> &rsaquo; <a href="/cgi-bin/koha/tools/tools-home.pl">Tools</a> &rsaquo; <!-- TMPL_IF name="uploadborrowers" --><a href="/cgi-bin/koha/tools/import_borrowers.pl">Import Patrons</a> &rsaquo; Results<!-- TMPL_ELSE -->Import Patrons<!-- /TMPL_IF --></div>

<div id="doc3" class="yui-t2">
   
   <div id="bd">
	<div id="yui-main">
	<div class="yui-b">
<div class="yui-g">
<div class="yui-u first">
<h1>Import Patrons</h1>
<!-- TMPL_IF name="uploadborrowers" -->
<p>Import results :</p>
<ul>
	<li><!-- TMPL_VAR name="imported" --> imported records</li>
	<li><!-- TMPL_VAR name="overwritten" --> overwritten</li>
	<li><!-- TMPL_VAR name="alreadyindb" --> not imported because already in borrowers table and overwrite disabled</li>
	<li><!-- TMPL_VAR name="invalid" --> not imported because they are not in the expected format</li>
	<li><!-- TMPL_VAR name="total" -->  records parsed</li>
	<li><a href="/cgi-bin/koha/tools/tools-home.pl">Back</a></li>
</ul>
<!-- TMPL_ELSE -->
<ul>
	<li>Select a file to import into the borrowers table</li>
	<li>If a cardnumber exists in the table, you can choose whether to ignore the new one or overwrite the old one.</li>
</ul>
<form method="post" action="<!-- TMPL_VAR name="SCRIPT_NAME" -->" enctype="multipart/form-data">
<fieldset class="rows">
<legend>Import into the borrowers table</legend>
<ol>
	<li>
		<label for="uploadborrowers">Select the file to import: </label>
		<input type="file" id="uploadborrowers" name="uploadborrowers" />
	</li>
</ol></fieldset>
    <fieldset class="rows">
        <legend>Field to use for record matching</legend>
        <ol>
            <li class="radio">
                <select name="matchpoint" id="matchpoint">
                    <option value="cardnumber">Cardnumber</option>
                    <!-- TMPL_LOOP NAME="matchpoints" -->
                        <option value="<!-- TMPL_VAR NAME="code" -->"><!-- TMPL_VAR NAME="description" --></option>
                    <!-- /TMPL_LOOP -->
                </select>
            </li>
        </ol>
    </fieldset>
	<fieldset class="rows">
	<legend>If matching record is already in the borrowers table:</legend><ol><li class="radio">
		 
		<input type="radio" id="overwrite_cardnumberno" name="overwrite_cardnumber" value="0" checked="checked" /><label for="overwrite_cardnumberno">Ignore this one, keep the existing one</label></li>
<li class="radio">
			<input type="radio" id="overwrite_cardnumberyes" name="overwrite_cardnumber" value="1" /><label for="overwrite_cardnumberyes">Overwrite the existing one with this</label>
	</li></ol></fieldset><fieldset class="action"><input type="submit" value="Import" /></fieldset>
</form>
<!-- /TMPL_IF -->
</div>
<div class="yui-u">
<h2>Notes:</h2>
<ul>
<li>Format the file in CSV format with the following fields:</li>
<li>
    'cardnumber',    'surname',      'firstname',        'title',
    'othernames',    'initials',     'streetnumber',     'streettype',
    'address',       'address2',     'city',             'zipcode',
    'email',         'phone',        'mobile',           'fax',
    'emailpro',      'phonepro',     'B_streetnumber',   'B_streettype',
    'B_address',     'B_city',       'B_zipcode',        'B_email',
    'B_phone',       'dateofbirth',  'branchcode',       'categorycode',
    'dateenrolled',  'dateexpiry',   'gonenoaddress',    'lost',
    'debarred',      'contactname',  'contactfirstname', 'contacttitle',
    'borrowernotes', 'relationship', 'ethnicity',        'ethnotes',
    'sex',           'userid',       'opacnote',         'contactnote',
    'password',      'sort1',        'sort2'<!-- TMPL_IF NAME="ExtendedPatronAttributes" -->, 'patron_attributes'<!-- /TMPL_IF -->
</li>
<!-- TMPL_IF NAME="ExtendedPatronAttributes" -->
<li>If loading patron attributes, the 'patron_attributes' field should contain a comma-separated list of attribute types 
and values.  The attribute type code and a ':' should precede each value. For example: &quot;INSTID:12345,LANG:fr&quot;.  This
means that if an input record has more than one attribute, the 'patron_attributes' field must be wrapped in double quotation marks.
<li>
<!-- /TMPL_IF -->
<li>Please make sure the 'branchcode' and 'categorycode' are valid entries in your database.</li>
<li>password should be stored in plaintext, and will be converted to a md5 hash (if your passwords are already encrypted, talk to your systems administrator about options).</li>
</ul>
</div>
</div>

</div>
</div>
<div class="yui-b noprint">
<!-- TMPL_INCLUDE NAME="tools-menu.inc" -->
</div>
</div>
<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
